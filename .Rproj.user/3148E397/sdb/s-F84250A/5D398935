{
    "collab_server" : "",
    "contents" : "download.terror <- function(years){\n\n  for(year in years){\n    cat('downloading year...', year, \"\\n\")\n    url <- paste0('http://www.start.umd.edu/gtd/search/ResultsCSV.aspx?csv=1&casualties_type=&casualties_max=&start_year=', \n                  year, '&start_month=1&start_day=1&end_year=', year, '&end_month=12&end_day=31')\n    download.file(url, paste0(\"data/raw data\", year, \".csv\"), \"internal\", quiet = FALSE, mode = \"w\",\n                              cacheOK = TRUE,\n                              extra = getOption(\"download.file.extra\"))\n  }\n\n}\n\nread.terror <- function(path){\n  raw.data <- data.frame()\n  files    <- list.files(path) \n  \n  for(file in files){\n    duom <- read.csv(paste0(path, file), stringsAsFactors = F)\n    raw.data <- rbind.fill(raw.data, duom)    \n  }\n  \n  ## Formating in a nice way\n  raw.data[raw.data==\"\"] <- NA\n  na.index <- which(apply(raw.data, 1, function(x) all(is.na(x))))\n  if(length(na.index)!=0) raw.data <- raw.data[-na.index, ]\n  raw.data <- raw.data[, c(\"DATE\", \"COUNTRY\", \"CITY\", \"PERPETRATOR.1\", \"FATALITIES\", \"INJURED\", \"TARGET.TYPE.1\", \"ATTACK.TYPE.1\",\n                           \"WEAPON.TYPE.1\")]\n  raw.data <- rename(raw.data, replace = c(\"DATE\" = \"Date\", \"CITY\"=\"City\", \n                                           \"COUNTRY\" = \"Country\", \"PERPETRATOR.1\"=\"Perpetrator\",\n                                           \"FATALITIES\"=\"Fatalities\", \"INJURED\"=\"Injured\", \n                                           \"TARGET.TYPE.1\"=\"Target type\", \"ATTACK.TYPE.1\" = \"Attack type\",\n                                           \"WEAPON.TYPE.1\"=\"Weapon type\"))\n  raw.data$Fatalities <- raw.data$Fatalities %>% as.numeric()\n  raw.data$Injured    <- raw.data$Injured %>% as.numeric()\n  return(raw.data)\n}\n\n\n\n",
    "created" : 1485092651189.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3912499095",
    "id" : "5D398935",
    "lastKnownWriteTime" : 1485095246,
    "last_content_update" : 1485095246925,
    "path" : "C:/Users/Eligijus/Desktop/bakalauras/bachelor-thesis/functions.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}